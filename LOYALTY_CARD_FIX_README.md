# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—Ä—Ç–∞–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ Willow

## üìã –ü—Ä–æ–±–ª–µ–º–∞
- –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–∏–Ω–∏–∞–ø–ø–∞ –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –µ—Å—Ç—å –≤ –∑–∞–∫–∞–∑–∞—Ö, –Ω–æ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É
- –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—ã–¥–∞—á–∞ –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç –≤ Telegram

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ

### 1. –ü—Ä–æ–±–ª–µ–º—ã –≤ Google Apps Script:
- **–ù–µ–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `initData`** - –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –≤—Å–µ–≥–¥–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ù–µ–Ω–∞–¥–µ–∂–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç** - –º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–µ 4-–∑–Ω–∞—á–Ω—ã–µ –Ω–æ–º–µ—Ä–∞
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø–∏—Å—å—é –≤ –ë–î** - –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü Cards –∏ Users
- **–û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

### 2. –ü—Ä–æ–±–ª–µ–º—ã –≤ Frontend (App.tsx):
- URL –±—ç–∫–µ–Ω–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π —Å–∫—Ä–∏–ø—Ç: `AKfycbwqXQjTHbLNQ2UYrpVvcGghVpl5Lr-UZ39NEoRK6JiAkaEn4f2ZJq84e8Q6zRAiZawz`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç API

## üöÄ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å Google Apps Script

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Google Apps Script**: https://script.google.com/d/1vaRrmXm_d_MAu8TwDd-rqjZomMSRQcDVfIE4geROmFKPzmV8vayscfee/edit

2. **–ó–∞–º–µ–Ω–∏—Ç–µ –≤–µ—Å—å –∫–æ–¥** —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ñ–∞–π–ª–∞ `gas-fixed-loyalty.js`

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Script Properties** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞):
   ```
   SPREADSHEET_ID: [ID –≤–∞—à–µ–π Google —Ç–∞–±–ª–∏—Ü—ã]
   TELEGRAM_TOKEN: 8452257685:AAHXDKbZWK53j5XzVD9MEiGTz38bVcT4e2s
   GROUP_CHAT_ID: -3075884218
   CASHIER_GROUP_ID: -3082827591
   ```

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å**:
   - –ù–∞–∂–∞—Ç—å "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å" ‚Üí "–ù–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ"
   - –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: "–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
   - –í—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫: "–Ø"
   - –£ –∫–æ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø: "–í—Å–µ"

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Frontend

URL –±—ç–∫–µ–Ω–¥–∞ —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ `src/App.tsx` (—Å—Ç—Ä–æ–∫–∞ 13-14):

```typescript
const BACKEND_URL = "https://script.google.com/macros/s/AKfycbz2_DN40d_wVf8H5if-vWAKNZEyjMaxWx2eTUEVwlC4LxUv7KHZAALmY1i-bJOWxpa5/exec";
```

### –®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ä—Ç—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `fixExistingCards()` –≤ Google Apps Script:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `fixExistingCards`
3. –ù–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å"

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram webhook

```bash
curl -X POST "https://api.telegram.org/bot8452257685:AAHXDKbZWK53j5XzVD9MEiGTz38bVcT4e2s/setWebhook" \
-H "Content-Type: application/json" \
-d '{"url": "https://script.google.com/macros/s/AKfycbz2_DN40d_wVf8H5if-vWAKNZEyjMaxWx2eTUEVwlC4LxUv7KHZAALmY1i-bJOWxpa5/exec"}'
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç:
- ‚úÖ –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û 4-–∑–Ω–∞—á–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ (1000-9999)  
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Set –¥–ª—è –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–π –ø–æ–∏—Å–∫ –µ—Å–ª–∏ —Ä–∞–Ω–¥–æ–º–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ë–î –ª–æ–≥–∏–∫–∞:
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü Cards –∏ Users
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü —Å —á–µ—Ç–∫–∏–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ initData:
- ‚úÖ –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Telegram WebApp
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π  
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTML

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç:
```
GET https://script.google.com/macros/s/AKfycbz2_DN40d_wVf8H5if-vWAKNZEyjMaxWx2eTUEVwlC4LxUv7KHZAALmY1i-bJOWxpa5/exec?test=card
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "ok": true,
  "test_card": "1234",
  "length": 4,
  "is_valid": true
}
```

### –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã /start –≤ Telegram:
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–æ—Ç—É `/start`
2. –î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å —Å 4-–∑–Ω–∞—á–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º –∫–∞—Ä—Ç—ã

### –¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–∑ –º–∏–Ω–∏–∞–ø–ø–∞:
1. –û—Ç–∫—Ä—ã—Ç—å https://willow-coffee-order.onrender.com
2. –í –∑–∞–≥–æ–ª–æ–≤–∫–µ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã #XXXX

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –≤ Google Apps Script:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä ‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `getStats()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–∞—Ä—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∑–∞–∫–∞–∑–æ–≤.

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–∞—Ä—Ç—ã –≤—Å–µ –µ—â–µ –Ω–µ 4-–∑–Ω–∞—á–Ω—ã–µ:
```javascript
// –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:
fixExistingCards()
```

### –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å TELEGRAM_TOKEN
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –≥—Ä—É–ø–ø –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

### –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
1. –û–±–Ω–æ–≤–∏—Ç–µ BACKEND_URL –≤ App.tsx
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ frontend
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

## üìù –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –û–±–Ω–æ–≤–ª–µ–Ω Google Apps Script –∫–æ–¥
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Script Properties  
- [ ] –°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω BACKEND_URL –≤ App.tsx
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω Telegram webhook
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è fixExistingCards()
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /start
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤ –º–∏–Ω–∏–∞–ø–ø–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å 4-–∑–Ω–∞—á–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏!